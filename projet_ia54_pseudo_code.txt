

Question : 
1) est-il possible de récupérer un agent via sont addresse dans 
		un kernel ? j'imagine que oui

2) Synchronisation des threads sur tout les accès à migrationWaiting et c'est tout ? 

3) Possible de tester si une periodic task est déjà lancée ou pas ?



migrationWaiting est une map<AgentAddress, maxtimeout>


Kernel -> migrate (Agent agent, AgetnAddress destinationKernel):
================================================================
DEBUT
	SI le kernel de destination et d'arrivée sont les mêmes OU
				l'agent fait déjà parti de migrationWaiting ALORS
		NE RIEN FAIRE
	SINON
		Mettre en pause l'agent pour longue période
		Sérialiser l'agent
		L'ajouter à la migrationWaiting avec timeout qu'il faut
		Lancer la périodicTask si elle n'est pas déjà lancée (TODO : checker si c'est possible de tester si elle est déjà lancée)
		L'envoyer au kernel destination
	FINSI
FIN	
	




MigrationPeriodicTask -> run():
===============================
DEBUT
	POUR CHAQUE elem DANS migrationWaiting FAIRE
		SI elem-> maxDateTimeout est dépassé ALORS
			Reveiller l'agent dont l'adresse est elem -> adresse
			Le supprimer de migrationWaiting
		FINSI
	FINPOUR
	
	SI migrationWaiting est vide ALORS
		Supprimer la periodic task
	FINSI
FIN




KernelAgent -> live()
=====================
DEBUT
	POUR CHAQUE msg de type MigrationMessage DANS mailbox FAIRE
		SI msg de type MigrationRequestMessage ALORS
			try:
				Déserialiser l'agent contenu dedans
				L'ajouter au thread d'execution du kernel Agent (en pause tjrs à ce moment là normalement)
				Envoyer MigrationSuccessMessage(adresse de l'agent) à l'émmeteur de msg
			catch:
				Envoyer MigrationErrorMessage(adresse de l'agent, String raison) à l'emmeteur de msg
		
		SINON SI msg de type MigrationSuccessMessage ALORS
			SI migrationWaiting contient msg.agentAddress ALORS
				Supprimer de migrationWaiting(msg.agentAddress)
				Envoyer MigrationACKMessage(adresse de l'agent)) l'émmeteur de msg
			FINSI
		
		SINON SI msg de type MigrationACKMessage ALORS
			Reveiller l'agent dont l'adresse est 'adresse de l'agent'
		
		SINON SI msg de type MigrationErrorMessage ALORS
			SI migrationWaiting contient msg.address ALORS
				Reveiller l'agent dont l'addresse est msg.address
				Supprimer de migrationWaiting l'agent dont l'adresse est msg.address
			FINSI
		FINSI

	FINPOUR
FIN
